\documentclass[calcdimensions,landscape,letterpaper]{powersem}
\usepackage{color}
\usepackage[pdftex]{thumbpdf} % For thumbnails
\usepackage[pdftex]{hyperref} % For links.
\usepackage[display,coloremph,whitebackground]{texpower} % colormath
\usepackage{fixseminar}
\usepackage{tpslifonts}
\usepackage[pdftex,final]{graphicx} % For including graphics.
\usepackage[utf8]{inputenc}
\usepackage{minted}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{eurosym}
\usepackage{booktabs} % rules in tables
\usepackage{multirow} % multi-row cells
\usepackage{rotating} % text rotation

\title{A Short Introduction to OpenGL}
\author{Jan Wedekind}
\date{Thursday, May 30th 2024}

\DeclareGraphicsExtensions{.jpg,.pdf,.png}
\pdfcompresslevel=9

\hypersetup{
   pdftitle          = {\thetitle},
   pdfsubject        = {After Catchup Presentation 30th May 2024},
   pdfauthor         = {Jan Wedekind},
   pdfkeywords       = {opengl, graphics, software},
   pdfcreator        = {okular},
   pdfproducer       = {LaTeX with hyperref and thumbpdf},
   bookmarksopen     = false,
   bookmarksnumbered = true,
   colorlinks        = true,
   pdfstartpage      = {1},
   pdfpagemode       = {FullScreen}
}

\DeclarePanel{top}{
  \begin{picture}(0,0)
    \put(-3, -293){\resizebox*{\pdfpagewidth}{\pdfpageheight}{\includegraphics{slide.png}}}
    \put(-10,-20){\parbox[c]{.9\textwidth}{\center\large\bf\thecurrentheading}}
  \end{picture}
}

\DeclarePanel{bottom}{
  \begin{picture}(0,0)
    \put(0,15){\parbox[c]{.98\pdfpagewidth}{\tiny\thedate\hfill\theslide/22}}
  \end{picture}
}

\slidesmag{4}
\backgroundstyle{none}
\slideframe{none}
\pagestyle{empty}

\mklength{\slideleftmargin}{-2cm}
\mklength{\sliderightmargin}{-2cm}
\mklength{\slidetopmargin}{2.0cm}
\mklength{\slidebottommargin}{1.5cm}

\renewcommand{\currentpagevalue}{\value{slide}}
\newcommand{\thecurrentheading}{}
\newcommand{\heading}[1]{\renewcommand{\thecurrentheading}{#1}}
\newcommand{\subheading}[1]{\concept{#1}}

\begin{document}

\begin{slide}
  \pdfbookmark[1]{\thetitle}{title}
  \heading{\ }
  \begin{center}
    \maketitle
  \end{center}
\end{slide}

\begin{slide}
  \pdfbookmark[1]{Motivation}{motivation}
  \heading{Motivation}
  \begin{center}
    \begin{minipage}[c]{.5\textwidth}
      \begin{itemize}
          \item less verbose than Vulkan
          \item cross-platform
      \end{itemize}
    \end{minipage}
  \end{center}
\end{slide}

\begin{slide}
    \pdfbookmark[1]{GLFW Window}{glfw}
    \heading{GLFW Window}
    \begin{center}
        \begin{minipage}[c]{.98\textwidth}
            \begin{minted}{C}
#include <GL/glew.h>
#include <GL/glut.h>
int width = 320;
int height = 240;
int main(int argc, char** argv)
{
  glutInit(&argc, argv);
  glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);
  glutInitWindowSize(width, height);
  glutCreateWindow("OpenGL example");
  glewExperimental = GL_TRUE;
  glewInit();
  glutMainLoop();
  return 0;
}
// gcc -o opengl-example opengl-example.c -lGL -lGLEW -lGLU -lglut
            \end{minted}
        \end{minipage}
    \end{center}
\end{slide}

\begin{slide}
  \pdfbookmark[1]{Pipeline}{pipeline}
  \heading{Pipeline}
  \begin{center}
    \begin{minipage}[t]{.45\textwidth}
        \subheading{minimal pipeline}\\
        \resizebox*{\textwidth}{!}{\includegraphics{pipeline-minimal}}
    \end{minipage}
    \begin{minipage}[t]{.45\textwidth}
        \subheading{full pipeline}\\
        \resizebox*{\textwidth}{!}{\includegraphics{pipeline}}
    \end{minipage}
  \end{center}
\end{slide}

\begin{slide}
    \pdfbookmark[1]{Minimal Shaders}{shader}
    \pdfbookmark[2]{Embedded in C}{shader}
    \heading{Minimal Shaders (Embedded in C)}
    \begin{center}
        \begin{minipage}[c]{.7\textwidth}
            \begin{minted}{C}
const char *vertexSource = "#version 130\n\
in mediump vec3 point;\n\
void main()\n\
{\n\
  gl_Position = vec4(point, 1);\n\
}";

const char *fragmentSource = "#version 130\n\
out mediump vec3 fragColor;\n\
void main()\n\
{\n\
  fragColor = vec3(1, 0, 0);\n\
}";
            \end{minted}
        \end{minipage}
    \end{center}
\end{slide}

\begin{slide}
    \pdfbookmark[2]{OpenGL Shader Language}{glsl}
    \heading{Minimal Shaders (OpenGL Shader Language (GLSL))}
    \begin{center}
        \begin{minipage}[c]{.5\textwidth}
            \begin{minted}{glsl}
#version 130
in mediump vec3 point;
void main()
{
  gl_Position = vec4(point, 1);
}
            \end{minted}
            \rule{4cm}{0.4pt}
            \begin{minted}{glsl}
#version 130
out mediump vec3 fragColor;
void main()
{
  fragColor = vec3(1, 0, 0);
}
            \end{minted}
        \end{minipage}
    \end{center}
\end{slide}

\begin{slide}
    \pdfbookmark[1]{GLUT Display Callbacks}{display-callbacks}
    \heading{GLUT Display Callbacks}
    \begin{center}
        \begin{minipage}[c]{.7\textwidth}
            \begin{minted}{C}
void onDisplay(void)
{
  glClearColor(0.2f, 0.2f, 0.2f, 0.0f);
  glClear(GL_COLOR_BUFFER_BIT);
  glutSwapBuffers();
}
void onResize(int w, int h)
{
  width = w; height = h;
  glViewport(0, 0, (GLsizei)w, (GLsizei)h);
}
int main(int argc, char** argv)
  // ...
  glutDisplayFunc(onDisplay);
  glutReshapeFunc(onResize);
  // ...
            \end{minted}
        \end{minipage}
    \end{center}
\end{slide}

\begin{slide}
    \pdfbookmark[1]{Compile and Link Shaders}{compile}
    \heading{Compile \& Link Shaders}
    \begin{center}
        \begin{minipage}[c]{.95\textwidth}
            \begin{minted}{C}
GLuint program;
// ...
int main(int argc, char** argv)
  // ...
  GLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);
  glShaderSource(vertexShader, 1, &vertexSource, NULL);
  glCompileShader(vertexShader);
  handleCompileError("Vertex shader", vertexShader);

  GLuint fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);
  glShaderSource(fragmentShader, 1, &fragmentSource, NULL);
  glCompileShader(fragmentShader);
  handleCompileError("Fragment shader", fragmentShader);

  program = glCreateProgram();
  glAttachShader(program, vertexShader);
  glAttachShader(program, fragmentShader);
  glLinkProgram(program);
  handleLinkError("Shader program", program);
            \end{minted}
        \end{minipage}
    \end{center}
\end{slide}

\begin{slide}
    \pdfbookmark[1]{Report Errors}{report-errors}
    \pdfbookmark[2]{Compile Errors}{compile-error}
    \heading{Report Errors}
    \subheading{Compile Errors}
    \begin{center}
        \begin{minipage}[c]{.95\textwidth}
            \begin{minted}{C}
#include <stdio.h>
// ...
void handleCompileError(const char *step, GLuint context)
{
  GLint result = GL_FALSE;
  glGetShaderiv(context, GL_COMPILE_STATUS, &result);
  if (result == GL_FALSE) {
    char buffer[1024];
    glGetShaderInfoLog(context, 1024, NULL, buffer);
    if (buffer[0]) fprintf(stderr, "%s: %s\n", step, buffer);
  };
}
            \end{minted}
        \end{minipage}
    \end{center}
\end{slide}

\begin{slide}
    \pdfbookmark[2]{Link Errors}{link-error}
    \heading{Report Errors}
    \subheading{Link Errors}
    \begin{center}
        \begin{minipage}[c]{.95\textwidth}
            \begin{minted}{C}
#include <stdio.h>
// ...
void handleLinkError(const char *step, GLuint context)
{
  GLint result = GL_FALSE;
  glGetProgramiv(context, GL_LINK_STATUS, &result);
  if (result == GL_FALSE) {
    char buffer[1024];
    glGetProgramInfoLog(context, 1024, NULL, buffer);
    if (buffer[0]) fprintf(stderr, "%s: %s\n", step, buffer);
  };
}
            \end{minted}
        \end{minipage}
    \end{center}
\end{slide}
% use core (instead of compatibility) profile
% show blank GLFW window
% show coloured window with clear color
% compile and link program rendering quad with constant color
% vertex array objects
% normalised device coordinates
% cleaning up code
% uniform variable for rotation
% GLFW to handle events
% rotate quad using keyboard
% Map texture onto quad (load image with STB?)
% Depth buffer, Reversed-z rendering
% Projection matrix
% Transformation matrix
% Culling
% Blending
% Phong shading
% Normal mapping
% Tessellation
% Mipmapping
% Shadow mapping
% Sky boxes
% HDR bloom
% fog
% OpenGL superbible
% learnopengl.com

\end{document}
